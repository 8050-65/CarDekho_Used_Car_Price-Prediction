import streamlit as st
import pickle

# Load the model
model = pickle.load(open("Car_Price_data.pkl", 'rb'))

title_html = """
<h1 style="color: green;">CarDekho Used Car Price Prediction</h1>
"""
st.markdown(title_html, unsafe_allow_html=True)

Fuel_Type_dict = {'Petrol': 0, 'Diesel': 1, 'LPG': 2, 'CNG': 3, 'Electric': 4}
Body_Type_dict = {'Hatchback': 0, 'SUV': 1, 'Sedan': 2, 'MUV': 3, 'Minivans': 4, 'Convertibles': 5, 'Hybrids': 6, 'Coupe': 7, 'Wagon': 8, 'Pickup Trucks': 9}
Transmission_dict = {'Manual': 0, 'Automatic': 1}

Car_Model_dict = {               
    'Maruti Celerio': 0,
    'Ford Ecosport': 1,
    'Tata Tiago': 2,
    'Hyundai Xcent': 3,
    'Maruti SX4 S Cross': 4,
    'Jeep Compass': 5,
    'Datsun GO': 6,
    'Maruti Ciaz': 7,
    'Hyundai Grand i10': 8,
    'Honda Jazz': 9,
    'Mahindra XUV500': 10,
    'Hyundai i20': 11,
    'Tata Nexon': 12,
    'Honda City': 13,
    'Maruti Swift': 14,
    'Renault Duster': 15,
    'Hyundai Santro': 16,
    'Mercedes-Benz E-Class': 17,
    'Audi A4': 18,
    'Maruti Wagon R': 19,
    'Maruti Ertiga': 20,
    'Mercedes-Benz C-Class': 21,
    'BMW 5 Series': 22,
    'Toyota Fortuner': 23,
    'Maruti Baleno': 24,
    'Hyundai Elantra': 25,
    'Audi A6': 26,
    'Maruti Alto 800': 27,
    'Mahindra Scorpio': 28,
    'Mini 3 DOOR': 29,
    'Kia Seltos': 30,
    'BMW X3': 31,
    'Hyundai i10': 32,
    'Volvo S60': 33,
    'Mahindra XUV300': 34,
    'MG Hector Plus': 35,
    'Honda Brio': 36,
    'Maruti Alto K10': 37,
    'Renault Kiger': 38,
    'Hyundai EON': 39,
    'Volkswagen Vento': 40,
    'Toyota Yaris': 41,
    'Hyundai Alcazar': 42,
    'Volkswagen T-Roc': 43,
    'BMW 3 Series': 44,
    'Audi Q5': 45,
    'Ford Endeavour': 46,
    'Maruti Ignis': 47,
    'BMW X5': 48,
    'Hyundai Tucson': 49,
    'MG Hector': 50,
    'Hyundai Verna': 51,
    'Mercedes-Benz GLC': 52,
    'Nissan Terrano': 53,
    'Honda CR-V': 54,
    'Mercedes-Benz A-Class Limousine': 55,
    'Toyota Innova': 56,
    'BMW 6 Series': 57,
    'Maruti Baleno RS': 58,
    'Renault Captur': 59,
    'Fiat Linea': 60,
    'Hyundai i20 Active': 61,
    'Hyundai Santro Xing': 62,
    'Maruti Vitara Brezza': 63,
    'Honda WR-V': 64,
    'Mahindra Ssangyong Rexton': 65,
    'Mitsubishi Cedia': 66,
    'Jaguar XF': 67,
    'Hyundai Venue': 68,
    'Audi A3': 69,
    'Skoda Kushaq': 70,
    'Maruti Swift Dzire': 71,
    'MG Astor': 72,
    'Hyundai Accent': 73,
    'Mercedes-Benz B Class': 74,
    'Kia Carnival': 75,
    'Skoda Laura': 76,
    'Skoda Superb': 77,
    'BMW X4': 78,
    'Land Rover Discovery Sport': 79,
    'Maruti Alto': 80,
    'Volvo XC40': 81,
    'Mahindra Verito': 82,
    'Maruti S-Presso': 83,
    'Volkswagen Jetta': 84,
    'Datsun RediGO': 85,
    'Ford Aspire': 86,
    'Ford Freestyle': 87,
    'Audi Q3': 88,
    'Ford Figo': 89,
    'Tata Tigor': 90,
    'Mercedes-Benz A Class': 91,
    'Toyota Glanza': 92,
    'Nissan Magnite': 93,
    'Renault Lodgy': 94,
    'Maruti Celerio X': 95,
    'Mercedes-Benz M-Class': 96,
    'Mercedes-Benz GLE': 97,
    'Mercedes-Benz CLA': 98,
    'Kia Sonet': 99,
    'Volkswagen Tiguan': 100,
    'Tata Altroz': 101,
    'Tata Indica V2': 102,
    'Toyota Innova Crysta': 103,
    'Volkswagen Ameo': 104,
    'Volkswagen Taigun': 105,
    'BMW X1': 106,
    'Chevrolet Cruze': 107,
    'Toyota Camry': 108,
    'Mahindra TUV 300': 109,
    'Chevrolet Beat': 110,
    'Toyota Corolla Altis': 111,
    'Maruti Eeco': 112,
    'Citroen C5 Aircross': 113,
    'Mahindra XUV700': 114,
    'Hyundai Grand i10 Nios': 115,
    'Maruti Zen': 116,
    'Mahindra Quanto': 117,
    'Land Rover Freelander 2': 118,
    'OpelCorsa': 119,
    'Mahindra Thar': 120,
    'Mahindra Xylo': 121,
    'Tata Zest': 122,
    'Honda New Accord': 123,
    'Skoda Yeti': 124,
    'Jaguar XE': 125,
    'Chevrolet Spark': 126,
    'Hyundai i20 N Line': 127,
    'Chevrolet Tavera': 128,
    'Mahindra Renault Logan': 129,
    'Mahindra e2o Plus': 130,
    'Citroen C3': 131,
    'Tata Nano': 132,
    'Mahindra Bolero Power Plus': 133,
    'Tata Hexa': 134,
    'Nissan Micra Active': 135,
    'Ford Fiesta': 136,
    'Fiat Punto': 137,
    'Kia Carens': 138,
    'Volkswagen Tiguan Allspace': 139,
    'Renault Triber': 140,
    'Skoda Slavia': 141,
    'Honda Amaze': 142,
    'Mahindra Marazzo': 143,
    'Tata Indigo': 144,
    'Nissan Sunny': 145,
    'Ford Ikon': 146,
    'Toyota Urban cruiser': 147,
    'Maruti SX4': 148,
    'Fiat Palio': 149,
    'Toyota Etios': 150,
    'Jeep Meridian': 151,
    'BMW 1 Series': 152,
    'Skoda Fabia': 153,
    'Volvo XC 90': 154,
    'Audi A3 cabriolet': 155,
    'MG Gloster': 156,
    'Mercedes-Benz S-Class': 157,
    'Nissan Micra': 158,
    'Fiat Punto EVO': 159,
    'Mini Cooper Countryman': 160,
    'Renault Fluence': 161,
    'Mahindra Bolero': 162,
    'Maruti A-Star': 163,
    'Chevrolet Sail': 164,
    'BMW 7 Series': 165,
    'Maruti XL6': 166,
    'Hyundai Sonata': 167,
    'Honda Civic': 168,
    'Isuzu MU 7': 169,
    'Mini Cooper': 170,
    'Maruti 800': 171,
    'Hyundai Aura': 172,
    'BMW 3 Series Gran Limousine': 173,
    'Volvo S90': 174,
    'Jaguar F-Pace': 175,
    'Tata Punch': 176,
    'Honda BR-V': 177,
    'Mahindra Scorpio N': 178,
    'Skoda Kodiaq': 179,
    'Tata Tiago NRG': 180,
    'Datsun GO Plus': 181,
    'Maruti Wagon R Stingray': 182,
    'Mini 5 DOOR': 183,
    'Fiat Grande Punto': 184,
    'Mahindra KUV 100 NXT': 185,
    'Mercedes-Benz GLA Class': 186,
    'Chevrolet Aveo': 187,
    'Land Rover Range Rover Velar': 188,
    'Tata Indica': 189,
    'Toyota Hyryder': 190,
    'Maruti Zen Estilo': 191,
    'Land Rover Range Rover Evoque': 192,
    'Mitsubishi Lancer': 193,
    'Isuzu MU-X': 194,
    'Fiat Punto Pure': 195,
    'Honda Mobilio': 196,
    'Chevrolet Optra': 197,
    'Hyundai Santa Fe': 198,
    'Chevrolet Enjoy': 199,
    'Volvo S 80': 200,
    'Mitsubishi Pajero': 201,
    'Audi A8': 202,
    'Volvo XC60': 203,
    'Mercedes-Benz AMG GLA 35': 204,
    'Mercedes-Benz AMG A 35': 205,
    'Volkswagen Virtus': 206,
    'Land Rover Discovery': 207,
    'Lexus ES': 208,
    'Audi Q2': 209,
    'Nissan Kicks': 210,
    'Mahindra TUV 300 Plus': 211,
    'Tata Safari Storme': 212,
    'Maruti Brezza': 213,
    'Jeep Wrangler': 214,
    'Toyota Etios Cross': 215,
    'Toyota Etios Liva': 216,
    'Mercedes-Benz GLC Coupe': 217,
    'Lexus RX': 218,
    'Land Rover Range Rover Sport': 219,
    'Mercedes-Benz CLS-Class': 220,
    'Maruti Jimny': 221,
    'Mini Cooper Clubman': 222,
    'Porsche Cayenne': 223,
    'Maruti Swift Dzire Tour': 224,
    'Mercedes-Benz GLA': 225,
    'Mercedes-Benz GLS': 226,
    'Porsche Macan': 227,
    'Mini Cooper Convertible': 228,
    'Toyota Fortuner Legender': 229,
    'Mahindra Scorpio Classic': 230,
    'Mercedes-Benz SLC': 231,
    'Maruti Grand Vitara': 232,
    'Tata Manza': 233,
    'Mitsubishi Outlander': 234,
    'Maruti FRONX': 235,
    'Jaguar XJ': 236,
    'Mahindra Alturas G4': 237,
    'Volkswagen Passat': 238,
    'Maruti Gypsy': 239,
    'Ford Fiesta Classic': 240,
    'Fiat Avventura': 241,
    'Honda City Hybrid': 242,
    'Tata Aria': 243,
    'Tata Bolt': 244,
    'Fiat Abarth Avventura': 245,
    'Mahindra Bolero Neo': 246,
    'Chevrolet Captiva': 247,
    'Toyota Corolla': 248,
    'Volvo S60 Cross Country': 249,
    'Renault Scala': 250,
    'Chevrolet Aveo U-VA': 251,
    'Isuzu D-Max': 252,
    'Maruti Omni': 253,
    'Maruti Esteem': 254,
    'Renault Pulse': 255,
    'Volkswagen CrossPolo': 256,
    'Jeep Compass Trailhawk': 257,
    'Tata Sumo Victa': 258,
    'Volvo V40': 259,
    'Porsche Panamera': 260,
    'Audi S5 Sportback': 261,
    'Jaguar F-TYPE': 262
}

def get_features(Fuel_Type, Body_Type, Transmission, Car_Model):
    features = [
        Fuel_Type_dict[Fuel_Type], Body_Type_dict[Body_Type], Transmission_dict[Transmission], Car_Model_dict[Car_Model],
        st.sidebar.number_input('Number of Owners', min_value=1),
        st.sidebar.number_input('Registration Year', min_value=2000, max_value=2022),
        st.sidebar.number_input('Number of Seats', min_value=2, max_value=9),
        st.sidebar.number_input('Kilometers Driven', min_value=0),
        st.sidebar.checkbox('Power Steering'),
        st.sidebar.checkbox('Air Conditioner'),
        st.sidebar.checkbox('Heater'),
        st.sidebar.checkbox('Central Locking'),
        st.sidebar.checkbox('Child Safety Locks'),
        st.sidebar.checkbox('Anti Theft Device'),
        st.sidebar.number_input('Mileage (kmpl)', min_value=0),
        st.sidebar.number_input('Max Power (bhp)', min_value=0),
    ]
    return features

Fuel_Type = st.sidebar.selectbox('Fuel Type', [None, 'Petrol', 'Diesel', 'LPG', 'CNG', 'Electric'])
Body_Type = st.sidebar.selectbox('Body Type', [None, 'Hatchback', 'SUV', 'Sedan', 'MUV', 'Minivans', 'Convertibles', 'Hybrids', 'Coupe', 'Wagon', 'Pickup Trucks'])
Transmission = st.sidebar.selectbox('Transmission', [None, 'Manual', 'Automatic'])
Car_Model = st.sidebar.selectbox('Car Model', [None, 'Maruti Celerio', 'Ford Ecosport'])  

if st.button('Predict'):
    data = [Fuel_Type, Body_Type, Transmission, Car_Model]
    if None not in data:
        features = get_features(Fuel_Type, Body_Type, Transmission, Car_Model)
        predict = model.predict([features])[0]
        st.title(f'Your car Price Rs {predict:.2f}')
    else:
        st.error("Please Kindly fill in all the fields.")
